<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preference Selection</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body, html {
          height: 100%;
          margin: 0;
          font-family: Georgia, 'Times New Roman', Times, serif;
          display: flex;
          justify-content: center;
          align-items: center;
      }
      .container {
          background: rgb(236, 255, 255);
          border-radius: 8px;
          padding: 20px;
          box-shadow: 0 4px 8px rgba(0,0,0,0.1), 0 0 10px rgba(0,0,0,0.2);
          width: 100%;
          max-width: 600px;
      }
      h1 {
          color: #333;
      }
      .option-group, .sub-option-group {
          display: flex;
          justify-content: center;
          margin-top: 20px;
      }
      .option, .sub-option {
          margin: 0 15px;
      }
      .sub-options {
          display: none;
          flex-direction: column;
          align-items: center;
          margin-top: 20px;
      }
      .sub-options label {
          margin: 10px 0;
          color: #333;
      }
      .option input[type="radio"], .sub-option input[type="radio"] {
          margin-right: 10px;
      }
      .option label, .sub-option label {
          color: #98B84A;
      }
      .sub-options {
          margin-bottom: 10px;
      }
      .sub-option-group label {
          display: inline-block;
          margin-right: 10px;
      }
      .sub-option-group {
          display: flex;
      }
      #saveButton {
          margin-top: 20px;
      }
  </style>
</head>
<body>
    <div class="container text-center">
        <h1>Which do you prefer?</h1>
        <div class="option-group">
            <label class="option">
                <input type="radio" name="mainOption" value="jump.jpeg" data-option-text="Option 1" onclick="changeBackgroundAndShow('option1')" checked> Option 1
            </label>
            <label class="option">
                <input type="radio" name="mainOption" value="naturefullhd.jpg" data-option-text="Option 2" onclick="changeBackgroundAndShow('option2')"> Option 2
            </label>
            <label class="option">
                <input type="radio" name="mainOption" value="ipohfood.jpg" data-option-text="Option 3" onclick="changeBackgroundAndShow('option3')"> Option 3
            </label>
            <label class="option">
                <input type="radio" name="mainOption" value="historicalbuilding.jpg" data-option-text="Option 4" onclick="changeBackgroundAndShow('option4')"> Option 4
            </label>
        </div>
        <div class="sub-options" id="option1-sub">
          <div class="sub-option-group">
              <label class="sub-option">
                  <input type="radio" name="subOption1" value="1.1" data-option-text="Option 1.1"> Option 1.1 &nbsp;
              </label>
              <label class="sub-option">
                  <input type="radio" name="subOption1" value="1.2" data-option-text="Option 1.2"> Option 1.2
              </label>
          </div>
        </div>
        
        <div class="sub-options" id="option2-sub">
          <div class="sub-option-group">
            <label class="sub-option">
                <input type="radio" name="subOption2" value="2.1" data-option-text="Option 2.1"> Option 2.1 &nbsp;
            </label>
            <label class="sub-option">
                <input type="radio" name="subOption2" value="2.2" data-option-text="Option 2.2"> Option 2.2
            </label>
          </div>
        </div>
      
        <div class="sub-options" id="option3-sub">
          <div class="sub-option-group">
            <label class="sub-option">
                <input type="radio" name="subOption3" value="3.1" data-option-text="Option 3.1"> Option 3.1 &nbsp;
            </label>
            <label class="sub-option">
                <input type="radio" name="subOption3" value="3.2" data-option-text="Option 3.2"> Option 3.2
            </label>
          </div>
        </div>
      
        <div class="sub-options" id="option4-sub">
          <div class="sub-option-group">
            <label class="sub-option">
                <input type="radio" name="subOption4" value="4.1" data-option-text="Option 4.1"> Option 4.1 &nbsp;
            </label>
            <label class="sub-option">
                <input type="radio" name="subOption4" value="4.2" data-option-text="Option 4.2"> Option 4.2
            </label>
          </div>
        </div>
        
        <button id="saveButton" class="btn btn-primary">Save and Continue</button>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <script>
        function changeBackgroundAndShow(optionId) {
            var backgroundImage = document.querySelector(`input[name="mainOption"]:checked`).value;
            document.body.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('image/${backgroundImage}')`;
            document.body.style.backgroundSize = 'cover';

            document.querySelectorAll('.sub-options').forEach(function(subOptionGroup) {
                subOptionGroup.style.display = 'none';
            });

            document.getElementById(optionId + '-sub').style.display = 'flex';
        }

        window.onload = function() {
            var defaultOption = document.querySelector('input[name="mainOption"]:checked');
            if (defaultOption) {
                changeBackgroundAndShow(defaultOption.getAttribute('onclick').split("'")[1]);
            }
        };

        function showSubOptions(optionId) {
            document.querySelectorAll('.sub-options').forEach(function(subOptionGroup) {
                subOptionGroup.style.display = 'none';
            });

            document.getElementById(optionId + '-sub').style.display = 'flex';
        }

        function saveSelections() {
            var mainOptionElement = document.querySelector('input[name="mainOption"]:checked');
            var mainOptionText = mainOptionElement.getAttribute('data-option-text');
            localStorage.setItem('mainOption', mainOptionText);

            var subOptionElement = document.querySelector(`input[name="subOption${mainOptionElement.value.charAt(0)}"]:checked`);
            if (subOptionElement) {
                var subOptionText = subOptionElement.getAttribute('data-option-text');
                localStorage.setItem('subOption', subOptionText);
            }
        }

        document.getElementById('saveButton').addEventListener('click', function() {
            saveSelections();
            window.location.href = 'Map.html';
        });
    </script>
</body>
</html>